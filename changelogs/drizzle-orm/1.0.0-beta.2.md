
> We've introduced a lot of changes in this version, and something will definitely break. If anything goes wrong, you can either downgrade to version `1.0.0-beta.1` or `0.44.7`, and please report any issues on GitHub or our Discord!

# New Features

## MSSQL dialect 

Drizzle now supports MSSQL in `drizzle-orm`, `drizzle-kit` and `drizzle-seed` packages. It support most of the columns, query builder capabilities, migration strategies, etc.

The only feature that is not yet supported is `RQBv2`

```ts
// Make sure to install the 'mssql' package 
import { drizzle } from 'drizzle-orm/node-mssql';

const db = drizzle(process.env.DATABASE_URL);
 
const result = await db.execute('select 1');
```
```ts
// Make sure to install the 'pg' package 
import { drizzle } from 'drizzle-orm/node-mssql';

// You can specify any property from the mssql connection options
const db = drizzle({ 
  connection: { 
    connectionString: process.env.DATABASE_URL,
    ssl: true
  }
});
 
const result = await db.execute('select 1');
```

## CockroachDB dialect

Drizzle now supports MSSQL in `drizzle-orm`, `drizzle-kit` and `drizzle-seed` packages. It support most of the columns, query builder capabilities, migration strategies, etc.

The only feature that is not yet supported is `RQBv2`

```ts
// Make sure to install the 'pg' package 
import { drizzle } from 'drizzle-orm/cockroach';

const db = drizzle(process.env.DATABASE_URL);
 
const result = await db.execute('select 1');
```
```ts
// Make sure to install the 'pg' package 
import { drizzle } from 'drizzle-orm/cockroach';

// You can specify any property from the node-postgres connection options
const db = drizzle({ 
  connection: { 
    connectionString: process.env.DATABASE_URL,
    ssl: true
  }
});
 
const result = await db.execute('select 1');
```

## Relational Query Parts

In a case you need to separate relations config into several parts you can use `defineRelationsPart` helpers

```ts
import { defineRelations, defineRelationsPart } from 'drizzle-orm';
import * as schema from "./schema";
export const relations = defineRelations(schema, (r) => ({
  users: {
    invitee: r.one.users({
      from: r.users.invitedBy,
      to: r.users.id,
    }),
    posts: r.many.posts(),
  }
}));
export const part = defineRelationsPart(schema, (r) => ({
  posts: {
    author: r.one.users({
      from: r.posts.authorId,
      to: r.users.id,
    }),
  }
}));
```

and then you can provide it to the db instance

```ts
const db = drizzle(process.env.DB_URL, { relations: { ...relations, ...part } })
```

## Folders v3 migrations

[WIP]

## Full `drizzle-kit` rewrite

Architecture rewrite that will close major kit and migration issues. We've done a set of very valuable and needed updates to iterate faster, having better test coverage, etc.

The work that was done:
[WIP]

## Bugs fixed

- [[BUG]: Drizzle-kit pulls postgres functions as Typescript methods](https://github.com/drizzle-team/drizzle-orm/issues/4916)

- [[BUG]: Changing from VARCHAR -> CITEXT (custom type) column generates "undefined"."citext" rather than "citext"](https://github.com/drizzle-team/drizzle-orm/issues/4806)

- [[BUG]: When setting the casing to snake_case, the constraint name for unique fields isn't converted](https://github.com/drizzle-team/drizzle-orm/issues/4800)

- [[BUG]: `drizzle-kit push` append `DROP SCHEMA` at the end for other schema name](https://github.com/drizzle-team/drizzle-orm/issues/4796)

- [[BUG]: `drizzle-kit push` incorrectly tries to drop composite unique constraint despite no changes made](https://github.com/drizzle-team/drizzle-orm/issues/4789)

- [[BUG]: MySQL enum defaults with value '0' are ignored during introspection](https://github.com/drizzle-team/drizzle-orm/issues/4786)

- [[BUG]: drizzle-kit / Amazon Aurora DSQL : `drizzle-kit push` tries to drop the primary key index on reapply without changes](https://github.com/drizzle-team/drizzle-orm/issues/4779)

- [[BUG]: `drizzle-kit check` wrongly tries to use AWS Data API](https://github.com/drizzle-team/drizzle-orm/issues/4775)

- [[BUG]: bunx drizzle-kit push Freezes at “Reading config file” in Version ^0.31.4](https://github.com/drizzle-team/drizzle-orm/issues/4771)

- [[BUG]: Introspect generated files don't show columns in Views as arrays](https://github.com/drizzle-team/drizzle-orm/issues/4764)

- [[BUG]: drizzle kit wrong  schema with default string](https://github.com/drizzle-team/drizzle-orm/issues/4760)

- [[BUG]: drizzle-kit pull fails to wrap gen_random_uuid() with sql function call resulting in syntax errors](https://github.com/drizzle-team/drizzle-orm/issues/4730)

- [[BUG]: `drizzle-kit introspect` empty `''` mysqlEnum nad default introspect error](https://github.com/drizzle-team/drizzle-orm/issues/4713)

- [[BUG]: CHECK constraints with operator functions generate invalid SQL with parameterized values](https://github.com/drizzle-team/drizzle-orm/issues/4661)

- [[BUG]: tinyint, bigint doesn't include when run drizzle-kit pull](https://github.com/drizzle-team/drizzle-orm/issues/4653)

- [[BUG]:drizzle-kit pull missing one ' letter column with default empty text](https://github.com/drizzle-team/drizzle-orm/issues/4644)

- [[BUG]: Unable to create composite foreign key: order of SQL statements [Postgres]](https://github.com/drizzle-team/drizzle-orm/issues/4638)

- [[BUG]: drizzle-kit MySQL Serializer doesn't see PKs and CHECK constraints](https://github.com/drizzle-team/drizzle-orm/issues/4602)

- [[BUG]: unique key names for multiple columns doesn't respect casing configuration](https://github.com/drizzle-team/drizzle-orm/issues/4541)

- [[BUG]: `drizzle-kit push` fails if the target postgres database has a `jsonb` column with a default value](https://github.com/drizzle-team/drizzle-orm/issues/4529)

- [[BUG]: `drizzle-kit generate` generates out of order/ incorrect migrations](https://github.com/drizzle-team/drizzle-orm/issues/4456)

- [[BUG]: `with:` columns resulting in `any` values](https://github.com/drizzle-team/drizzle-orm/issues/4432)

- [[BUG]: Drizzle not pulling foreign key names using introspect command in ts + mysql](https://github.com/drizzle-team/drizzle-orm/issues/4415)

- [[BUG]: Invalid SQL query generated for MySQL when using "with" feature](https://github.com/drizzle-team/drizzle-orm/issues/4412)

- [[BUG]: with Relation in findMany Returns Flattened Array Instead of Key-Value Object](https://github.com/drizzle-team/drizzle-orm/issues/4409)

- [[BUG]: drizzle-orm@beta query object is empty in NuxtHub project](https://github.com/drizzle-team/drizzle-orm/issues/4390)

- [[BUG]: Big int precision loss when data fetched with json_agg](https://github.com/drizzle-team/drizzle-orm/issues/4380)

- [[BUG]: Incorrect column types when using `with` for table created with helper function](https://github.com/drizzle-team/drizzle-orm/issues/4358)

- [[BUG]: drizzle-orm@beta SQLite error in queries w/ `with`](https://github.com/drizzle-team/drizzle-orm/issues/4357)

- [[BUG]: Identifier is too long (should not exceed 63 characters)](https://github.com/drizzle-team/drizzle-orm/issues/4238)

- [[BUG]: Unable to create MySQL foreign string keys](https://github.com/drizzle-team/drizzle-orm/issues/4221)

- [[BUG]: Drizzle type inferrence doesn't work properly with many tables](https://github.com/drizzle-team/drizzle-orm/issues/4199)

- [findFirst Date returned as string](https://github.com/drizzle-team/drizzle-orm/issues/4186)

- [[BUG]: Can't drop a foreign key in Turso dialect](https://github.com/drizzle-team/drizzle-orm/issues/4167)

- [[BUG]: wrong table name generated in `$count` sub-expression](https://github.com/drizzle-team/drizzle-orm/issues/4164)

- [[BUG]:Unknown column in where](https://github.com/drizzle-team/drizzle-orm/issues/4159)

- [[BUG]: drizzle-kit generate when dropping table attempts to delete already deleted constraint](https://github.com/drizzle-team/drizzle-orm/issues/4155)

- [[BUG]: Incomplete inferred result type in query API when using optional columns](https://github.com/drizzle-team/drizzle-orm/issues/4153)

- [SQLite columns are not marked as unique, instead a unique index has been created](https://github.com/drizzle-team/drizzle-orm/issues/4152)

- [[BUG]:Introspect does not pull foreign key names when `on delete` and  `on update` are set to other than `no action`](https://github.com/drizzle-team/drizzle-orm/issues/4115)

- [[BUG]: `drizzle-kit pull` made a broken schema as TypeScript. (looks forget to import `tinyint` from drizzle-orm/mysql-core)](https://github.com/drizzle-team/drizzle-orm/issues/4110)

- [[BUG]: Drizzle Relational Query not filtering well](https://github.com/drizzle-team/drizzle-orm/issues/4080)

- [[BUG]:Inconsistent behavior in many-to-many relations with junction table: identical patterns yield different results](https://github.com/drizzle-team/drizzle-orm/issues/3937)

- [[BUG]:Error Typescript for query where in relation (version  "drizzle-orm": "^0.38.3")](https://github.com/drizzle-team/drizzle-orm/issues/3911)

- [[BUG]: findFirst not return undefined or null when not data is found.](https://github.com/drizzle-team/drizzle-orm/issues/3872)

- [[DOCS]: Nullable Relation](https://github.com/drizzle-team/drizzle-orm/issues/3855)

- [[BUG]: Type error when performing filter select according to docs](https://github.com/drizzle-team/drizzle-orm/issues/3804)

- [[BUG]: Incorrect Non-Nullable Type Inference for One-to-One Related Entities](https://github.com/drizzle-team/drizzle-orm/issues/3799)

- [[BUG]: Allow specifying relationName for one-to-one relationships on the side without field definitions](https://github.com/drizzle-team/drizzle-orm/issues/3763)

- [[BUG]: Custom types not working when insert with onConflictDoUpdate in Sqlite](https://github.com/drizzle-team/drizzle-orm/issues/3730)

- [[FEATURE]: Scopes API](https://github.com/drizzle-team/drizzle-orm/issues/3646)

- [[BUG]: Column name conversion not working when using `sql.js`](https://github.com/drizzle-team/drizzle-orm/issues/3642)

- [[BUG]: Drizzle-kit no longer supporting the special characters in enum values (MySQL)](https://github.com/drizzle-team/drizzle-orm/issues/3613)

- [[BUG]:drizzle-kit pull returns .with({"securityInvoker":"on"})](https://github.com/drizzle-team/drizzle-orm/issues/3585)

- [[BUG]: db.query creates slow (?) queries in related queries](https://github.com/drizzle-team/drizzle-orm/issues/3581)

- [[BUG]:push creates duplicate statements for unique column index](https://github.com/drizzle-team/drizzle-orm/issues/3574)

- [[BUG]: findMany (and likely others) building an invalid query when other tables are referenced in the where clause](https://github.com/drizzle-team/drizzle-orm/issues/3573)

- [[BUG]: $count() generates the wrong Postgres subquery](https://github.com/drizzle-team/drizzle-orm/issues/3564)

- [[BUG]:drizzle-kit pull generate wrong schema.ts](https://github.com/drizzle-team/drizzle-orm/issues/3559)

- [[BUG]: Instrospect doesn't put `.primaryKey()` in my tables](https://github.com/drizzle-team/drizzle-orm/issues/3552)

- [[BUG]: extras in findMany count relations is not working](https://github.com/drizzle-team/drizzle-orm/issues/3546)

- [[BUG]: TypeError: Cannot read properties of undefined (reading 'columns')](https://github.com/drizzle-team/drizzle-orm/issues/3539)

- [[BUG]: `pgEnum` generates faulty migrations](https://github.com/drizzle-team/drizzle-orm/issues/3514)

- [[BUG]: Query include relations => relation table has jsonb field =>  SqliteError: JSON cannot hold BLOB values ](https://github.com/drizzle-team/drizzle-orm/issues/3497)

- [MYSQL Introspect: Warning: Can't parse bit(1) from database](https://github.com/drizzle-team/drizzle-orm/issues/3480)

- [Certain Postgres types are not handled by `introspect:pg`](https://github.com/drizzle-team/drizzle-orm/issues/3479)

- [BUG `drizzle-kit push:mysql` with Two Primary Keys](https://github.com/drizzle-team/drizzle-orm/issues/3473)

- [push:mysql fails to drop a serial column and replace with another column type](https://github.com/drizzle-team/drizzle-orm/issues/3471)

- [db push just hangs, verbose doesn't show any details](https://github.com/drizzle-team/drizzle-orm/issues/3470)

- [Drizzle Studio giving error due to `CURRENT_TIMESTAMP` in schema](https://github.com/drizzle-team/drizzle-orm/issues/3453)

- [[Mysql] Drizzle kit generates invalid SQL syntax for `onUpdateNow` when an `fsp` is provided to timestamp](https://github.com/drizzle-team/drizzle-orm/issues/3373)

- [drizzle-kit push with PostGIS geometry column type](https://github.com/drizzle-team/drizzle-orm/issues/3347)

- [[BUG]: Mysql new .unique().notNull(), `add constraint` is put before `add column`, throwing error.](https://github.com/drizzle-team/drizzle-orm/issues/3329)

- [Double quotes on defaults](https://github.com/drizzle-team/drizzle-orm/issues/3318)

- [There are three cases where drizzle-kit's introspect:mysql does not work. ](https://github.com/drizzle-team/drizzle-orm/issues/3297)

- [MySQL & PostgreSQL: not detecting all new cascades](https://github.com/drizzle-team/drizzle-orm/issues/3293)

- [[BUG]:array of enum occurs error when drizzle-kit pushing](https://github.com/drizzle-team/drizzle-orm/issues/3278)

- [[BUG]:Deep nested queries](https://github.com/drizzle-team/drizzle-orm/issues/3277)

- [[BUG]: `findMany`/`findFirst` incorrectly substituting table names in sql operator](https://github.com/drizzle-team/drizzle-orm/issues/3268)

- [[BUG]: Incorrect bigint value retrieval using findMany with relations (postgresql)](https://github.com/drizzle-team/drizzle-orm/issues/3267)

- [[BUG]: bit type goes to postgresql as a string](https://github.com/drizzle-team/drizzle-orm/issues/3254)

- [[BUG]: Foreign key name length](https://github.com/drizzle-team/drizzle-orm/issues/3244)

- [[BUG]: "unix_timestamp is not defined"](https://github.com/drizzle-team/drizzle-orm/issues/3237)

- [[BUG]: Pressing `escape` while in the `push` confirmation dialog runs the push](https://github.com/drizzle-team/drizzle-orm/issues/3230)

- [[BUG]: arrayContains, arrayContained, arrayOverlaps aren't there in queries find callbacks](https://github.com/drizzle-team/drizzle-orm/issues/3169)

- [[BUG]: Query extras resolve table names incorrectly](https://github.com/drizzle-team/drizzle-orm/issues/3110)

- [[BUG]: UUID Error on push, but no issue via generate / migrate](https://github.com/drizzle-team/drizzle-orm/issues/3090)

- [[BUG]: default value in migration generates invalid sql.ts file](https://github.com/drizzle-team/drizzle-orm/issues/3087)

- [[BUG]: drizzle-kit triggers a _ZodError when uniqueIndex is used together with sql lower](https://github.com/drizzle-team/drizzle-orm/issues/3062)

- [[BUG]: drizzle-kit introspect TypeError: Cannot read properties of null (reading 'camelCase')](https://github.com/drizzle-team/drizzle-orm/issues/3046)

- [[BUG]: Types aren't correctly inferred for nested `with: { where }` clauses](https://github.com/drizzle-team/drizzle-orm/issues/3045)

- [[BUG]: drizzle-kit introspection does not import "bigint" type when introspecting a MySql database.](https://github.com/drizzle-team/drizzle-orm/issues/2988)

- [[BUG]: findFirst and findMany queries using the 'with' statement can't parse the models if the related table has a geomtery column](https://github.com/drizzle-team/drizzle-orm/issues/2961)

- [[FEATURE]: API for to 'flatten' response shapes when querying data from complex schemas and their relations.](https://github.com/drizzle-team/drizzle-orm/issues/2933)

- [[FEATURE]: Add `where` in one-to-one querying](https://github.com/drizzle-team/drizzle-orm/issues/2903)

- [[DOCUMENTATION]: Typo in the code](https://github.com/drizzle-team/drizzle-orm/issues/2840)

- [[BUG]: migrations do not work - table already exists - ER_TABLE_EXISTS_ERROR - mysql](https://github.com/drizzle-team/drizzle-orm/issues/2815)

- [[BUG]: pg geometry is preventing migration](https://github.com/drizzle-team/drizzle-orm/issues/2806)

- [[BUG]: Do statement double dollar sign not escaping cases where you want a "$" as a value](https://github.com/drizzle-team/drizzle-orm/issues/2710)

- [[BUG]: Drizzle Query Returns Different Result Than Select](https://github.com/drizzle-team/drizzle-orm/issues/2703)

- [[BUG]: drizzle-orm imported operators `eq`, `lt`, etc. unable to recognize left hand "table.column" param while callback syntax works](https://github.com/drizzle-team/drizzle-orm/issues/2698)

- [[BUG]: PG Numeric inferred as string, but is numeric at runtime](https://github.com/drizzle-team/drizzle-orm/issues/2681)

- [[BUG]: Geometry type ignores SRID option](https://github.com/drizzle-team/drizzle-orm/issues/2675)

- [[FEATURE]: Drizzle relations with materialized views ](https://github.com/drizzle-team/drizzle-orm/issues/2653)

- [[BUG]: MySQL generatedAlwaysAs with notNull](https://github.com/drizzle-team/drizzle-orm/issues/2616)

- [[BUG]: Unique key reconciliation with upstream schema is inconsistent](https://github.com/drizzle-team/drizzle-orm/issues/2599)

- [[BUG]: Aggregated results from many-to-one relations doesn't return timestamp using postgres DB](https://github.com/drizzle-team/drizzle-orm/issues/2555)

- [[BUG]: Issues with nested conditions & placeholders in SQLite query](https://github.com/drizzle-team/drizzle-orm/issues/2529)

- [[BUG]:  Postgis `geometry` query select fails when using `with`](https://github.com/drizzle-team/drizzle-orm/issues/2526)

- [[BUG]: Geometry config type doesn't appear to affect the output sql](https://github.com/drizzle-team/drizzle-orm/issues/2454)

- [[BUG]: relation query API default alias is different than regular alias](https://github.com/drizzle-team/drizzle-orm/issues/2431)

- [[BUG]: Unable to provide sql value in $onUpdate](https://github.com/drizzle-team/drizzle-orm/issues/2388)

- [[BUG]: Typing issue when using tables with the same name across different schemas](https://github.com/drizzle-team/drizzle-orm/issues/2387)

- [Support nested orderBy](https://github.com/drizzle-team/drizzle-orm/issues/2297)

- [[BUG]: Timestamp formatted differently if fetched as relation rather than directly](https://github.com/drizzle-team/drizzle-orm/issues/2282)

- [[FEATURE]: Allow for hardcoded values in relations](https://github.com/drizzle-team/drizzle-orm/issues/2268)

- [[BUG]: Adding new column and unique key on the new column generates invalid migration file](https://github.com/drizzle-team/drizzle-orm/issues/2236)

- [[BUG]: encoding issue with non-ASCII characters](https://github.com/drizzle-team/drizzle-orm/issues/2235)

- [[BUG]: Query API does not include schema name when including child relations ](https://github.com/drizzle-team/drizzle-orm/issues/2194)

- [[BUG]: Planetscale got packets out of order for 'serial' type on push](https://github.com/drizzle-team/drizzle-orm/issues/2180)

- [[BUG]: Postgres customType generate invalid SQL.](https://github.com/drizzle-team/drizzle-orm/issues/2087)

- [[BUG]: Deeply nested queries fail due to table name length](https://github.com/drizzle-team/drizzle-orm/issues/2066)

- [[BUG]: on cascade delete issue with multiple foreign keys and migrations](https://github.com/drizzle-team/drizzle-orm/issues/2018)

- [[DOCS]: Relationships should have their own page](https://github.com/drizzle-team/drizzle-orm/issues/1913)

- [[BUG]: Schema name is not prepended to the table name when aliased const.](https://github.com/drizzle-team/drizzle-orm/issues/1903)

- [[BUG]: `Do not know how to serialize a BigInt` errors when using BigInt in `default(0n)` directive](https://github.com/drizzle-team/drizzle-orm/issues/1879)

- [[BUG]: Typescript doesn't recognize One-To-One Relation](https://github.com/drizzle-team/drizzle-orm/issues/1869)

- [[BUG]: sql`` interpolates the wrong table name when used in extras](https://github.com/drizzle-team/drizzle-orm/issues/1815)

- [[BUG]: pg-native Pools don't work with Transactions](https://github.com/drizzle-team/drizzle-orm/issues/1707)

- [[BUG]: Custom types not working in `with` queries](https://github.com/drizzle-team/drizzle-orm/issues/1572)

- [[BUG]: ERROR: operator does not exist](https://github.com/drizzle-team/drizzle-orm/issues/1570)

- [[BUG]:Property 'notNull` in the timstamp type](https://github.com/drizzle-team/drizzle-orm/issues/1535)

- [[BUG]: eq function is nor working in 0.29.0](https://github.com/drizzle-team/drizzle-orm/issues/1488)

- [[BUG]: does nesting with blocks has threshold with pg](https://github.com/drizzle-team/drizzle-orm/issues/1477)

- [[FEATURE]: infer possible undefined columns value if is a boolean (not specifically true or false)](https://github.com/drizzle-team/drizzle-orm/issues/1438)

- [[BUG]: ER_WRONG_AUTO_KEY - Drizzle Kit not detecting primary keys](https://github.com/drizzle-team/drizzle-orm/issues/1428)

- [[BUG]: Error: Multiple primary key defined](https://github.com/drizzle-team/drizzle-orm/issues/1413)

- [[BUG]: Unable to use orderBy clause on multiple relations when placed adjacently in a query (MySQL)](https://github.com/drizzle-team/drizzle-orm/issues/1396)

- [[BUG]: wrong typeHint when using relations (one and automatic limit: 1)](https://github.com/drizzle-team/drizzle-orm/issues/1368)

- [[BUG]: orderBy causes relational query to fail](https://github.com/drizzle-team/drizzle-orm/issues/1249)

- [[BUG]: `columns` partial select gives bad type with dynamic conditions](https://github.com/drizzle-team/drizzle-orm/issues/1163)

- [[BUG]: `mapWith` isn't working on `extras` when doing relational queries with `findFirst` or `findMany`](https://github.com/drizzle-team/drizzle-orm/issues/1157)

- [[BUG]: `findFirst` and `findMany` isn't correctly setting the table name when using sql directive `sql`${table}``](https://github.com/drizzle-team/drizzle-orm/issues/1149)

- [[FEATURE]: Add back filtering by nested relations in relational queries](https://github.com/drizzle-team/drizzle-orm/issues/1069)

- [[FEATURE]: Optional One-to-One Relation](https://github.com/drizzle-team/drizzle-orm/issues/1066)

- [[FEATURE]: Support Polymorphic Association](https://github.com/drizzle-team/drizzle-orm/issues/1051)

- [[BUG]: where clause on relational query overwrites the table name](https://github.com/drizzle-team/drizzle-orm/issues/975)

- [[BUG]: error: column "role" cannot be cast automatically to type user_role](https://github.com/drizzle-team/drizzle-orm/issues/930)

- [[FEATURE]: How much support for cockroachdb?](https://github.com/drizzle-team/drizzle-orm/issues/845)

- [[BUG]: Relations inferring incorrect table with non-default Postgres schema](https://github.com/drizzle-team/drizzle-orm/issues/830)

- [[FEATURE]: Filtered & ordered relationships](https://github.com/drizzle-team/drizzle-orm/issues/821)

- [[BUG]: Relational queries break customTypes with underlying DECIMAL dataTypes](https://github.com/drizzle-team/drizzle-orm/issues/820)

- [[BUG]: Column with custom type not working with `default()`](https://github.com/drizzle-team/drizzle-orm/issues/818)

- [[BUG]: Can't use views with relations API](https://github.com/drizzle-team/drizzle-orm/issues/769)

- [[FEATURE]: Add extra conditions to the joins](https://github.com/drizzle-team/drizzle-orm/issues/756)

- [[BUG]: Drizzle is bloating indexes on MySQL](https://github.com/drizzle-team/drizzle-orm/issues/706)

- [[BUG]: Relational query on sqlite/d1 with order-by has issues](https://github.com/drizzle-team/drizzle-orm/issues/705)

- [Allow referencing deeply nested properties in relational queries](https://github.com/drizzle-team/drizzle-orm/issues/696)

- [[FEATURE]: Customizable many relations](https://github.com/drizzle-team/drizzle-orm/issues/674)

- [[FEATURE]: "through" relation queries](https://github.com/drizzle-team/drizzle-orm/issues/607)

- [[FEATURE]: MSSQL dialect](https://github.com/drizzle-team/drizzle-orm/issues/585)

- [[BUG]: planetscale - now() and current_timestamp() doesn't work when FSP is specified for timestamp](https://github.com/drizzle-team/drizzle-orm/issues/472)

- [[BUG]: MySQL alter table fails where tablename is reserved word](https://github.com/drizzle-team/drizzle-orm/issues/364)

# Updates and Fixes

- Fixed pg-native Pool detection in node-postgres transactions  
- Allowed subqueries in select fields  
- Updated typo algorythm => algorithm  
- Fixed `$onUpdate` not handling `SQL` values (fixes [#2388](https://github.com/drizzle-team/drizzle-orm/issues/2388), tests implemented by [L-Mario564](https://github.com/L-Mario564) in [#2911](https://github.com/drizzle-team/drizzle-orm/pull/2911))
- Fixed `pg` mappers not handling `Date` instances in `bun-sql:postgresql` driver responses for `date`, `timestamp` types (fixes [#4493](https://github.com/drizzle-team/drizzle-orm/issues/4493))  
